const isConcieveForMenPage = window.location.pathname.includes("fertilitysmart-conceive-for-men");

const expHtml = `<div id="ftsm-009-modal"> <div class="ftsm-009-modal-inner"> <div class="ftsm-009-modal-content"> <div class="ftsm-009__table"> <div class="ftsm-009__table-cell-fluid ftsm-009__table-cell--bg-accent"> <span>Suplimental Facts</span> </div> <div class="ftsm-009__table-cell-fluid"> <span>Serving Size: 2 capusules daily, preferably with meals.</span> </div> <div class="ftsm-009__table-column"> <div class="ftsm-009__table-cell ftsm-009__table-cell--bg-accent" style="align-items: flex-start;">Ingredient</div> <div class="ftsm-009__table-cell"> <span>L-Arginine</span> </div> <div class="ftsm-009__table-cell"> <span>Chasteberry</span> </div> <div class="ftsm-009__table-cell"> <span>Green Tea Extract</span> </div> <div class="ftsm-009__table-cell"> <span>Magnesium</span> </div> <div class="ftsm-009__table-cell"> <span>CoQ10</span> </div> <div class="ftsm-009__table-cell"> <span>Zinc</span> </div> <div class="ftsm-009__table-cell"> <span>Vitamin B3 (Niacin)</span> </div> <div class="ftsm-009__table-cell"> <span>Iron</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--big"> <span>Pyridoxal 5 Phosphate (Vit B6)</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--big"> <span>Vitamin B5 (Pantothenic Acid)</span> </div> <div class="ftsm-009__table-cell"> <span>Vitamin B2 (Riboflavin)</span> </div> <div class="ftsm-009__table-cell"> <span>Vitamin B1 (Thiamin)</span> </div> <div class="ftsm-009__table-cell"> <span>Folic Acid</span> </div> <div class="ftsm-009__table-cell"> <span>Selenium</span> </div> <div class="ftsm-009__table-cell"> <span>Biotin</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--big"> <span>Vitamin B12 (Cyanocobalamin)</span> </div> <div class="ftsm-009__table-cell"> <span>Vitamin D3 (500iu)</span> </div> <div class="ftsm-009__table-cell"> <span>Vitamin E Synthetic</span> </div> </div> <div class="ftsm-009__table-column"> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--bg-accent"> <span class="ftsm-009__table-cell__heading" style="font-weight: 700;">Mg/Mcg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>500mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>400mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>180mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>400mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>100mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>15mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>14mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>9mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--big"> <span>6mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--big"> <span>5mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>1mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>1mg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>400mcg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>70mcg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>30mcg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--big"> <span>12mcg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>37mcg</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>97mcg</span> </div> </div> <div class="ftsm-009__table-column"> <div class="ftsm-009__table-cell ftsm-009__table-cell__heading ftsm-009__table-cell--bg-accent">% (DV)</div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>N/a</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>N/a</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>N/a</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>108%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>N/a</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>150%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>87%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>63%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--big"> <span>429%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--big"> <span>84%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>72%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>93%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>201%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>126%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>60%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered ftsm-009__table-cell--big"> <span>480%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>750%</span> </div> <div class="ftsm-009__table-cell ftsm-009__table-cell--centered"> <span>813%</span> </div> </div> <div class="ftsm-009__table-cell-fluid"> <span> <strong>Other Ingredients:</strong> Vegetarian capsules. This product contains no fillers, artificial colours, sweeteners, flavours or binders.</span> </div> </div> </div> <button class="ftsm-009-modal__close"> <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none"> <circle cx="14" cy="14" r="13.5" fill="white" stroke="#868686" /> <mask id="mask0_1009_961" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="4" y="4" width="20" height="20"> <rect x="4" y="4" width="20" height="20" fill="#D9D9D9" /> </mask> <g mask="url(#mask0_1009_961)"> <path d="M9.33317 19.8333L8.1665 18.6666L12.8332 14L8.1665 9.33329L9.33317 8.16663L13.9998 12.8333L18.6665 8.16663L19.8332 9.33329L15.1665 14L19.8332 18.6666L18.6665 19.8333L13.9998 15.1666L9.33317 19.8333Z" fill="#868686" /> </g> </svg> </button> </div> </div>`;
const expCss = `.product-pills__img { pointer-events: initial !important; } body.ftsm-009-modal-open { height: 100vh; overflow-y: hidden; } #ftsm-009-modal { display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; opacity: 0; pointer-events: none; position: fixed; top: 0; left: 0; background-color: rgba(34, 29, 35, 0.70); transform: scale(1.15); transition: transform 0.1s cubic-bezier(0.465, 0.183, 0.153, 0.946), opacity 0.1s cubic-bezier(0.465, 0.183, 0.153, 0.946); z-index: 9999999999; } #ftsm-009-modal.visible { pointer-events: auto; opacity: 1; transform: scale(1); transition: transform 0.2s cubic-bezier(0.465, 0.183, 0.153, 0.946), opacity 0.2s cubic-bezier(0.465, 0.183, 0.153, 0.946); } #ftsm-009-modal .ftsm-009-modal-inner { width: 626px; max-height: calc(100% - 52px); display: flex; background-color: #fff; padding: 20px; overflow: visible; position: relative; } #ftsm-009-modal .ftsm-009-modal__img { margin-left: -58px; } #ftsm-009-modal .ftsm-009-modal__heading { font: 600 40px/48px "Poppins", sans-serif; color: #0033a1; margin: 0 0 24px; } #ftsm-009-modal .ftsm-009-modal__p { font: 400 18px/28px "Poppins", sans-serif; color: #415364; margin-bottom: 32px; } #ftsm-009-modal .ftsm-009-modal__link { width: 126px; } #ftsm-009-modal .ftsm-009-modal__close { width: 28px; height: 28px; padding: 0; position: absolute; top: 0; right: 0px; transform: translate(25%, -50%); z-index: 10000; cursor: pointer; } #ftsm-009-modal .ftsm-009-modal__close svg { pointer-events: none; } #ftsm-009-modal .ftsm-009-modal-content { max-height: 100%; overflow-y: scroll; } #ftsm-009-modal .ftsm-009__table { display: flex; flex-wrap: wrap; border: 1px solid #e46198; } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table { border-color: #2975ab; } #ftsm-009-modal .ftsm-009__table-column:first-of-type { width: 43%; } #ftsm-009-modal .ftsm-009__table-column:not(:first-of-type) { border-left: 1px solid rgba(228, 97, 152, 0.4); flex: 1 1 0; } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-column:not(:first-of-type) { border-left: 1px solid rgba(41, 117, 171, 0.4); } #ftsm-009-modal .ftsm-009__table-column--active .ftsm-009__table-cell { background-color: rgba(100, 42, 117, 0.1); } #ftsm-009-modal .ftsm-009__table-cell:first-of-type { flex-direction: column; justify-content: center; text-align: center; } #ftsm-009-modal .ftsm-009__table-cell { height: 32px; display: flex; align-items: center; padding: 8px 10px; } #ftsm-009-modal .ftsm-009__table-cell, #ftsm-009-modal .ftsm-009__table-cell-fluid { font: 400 12px/16px "Jost", sans-serif; color: #221d23; } #ftsm-009-modal .ftsm-009__table-cell:not(:last-of-type) { border-bottom: 1px solid rgba(228, 97, 152, 0.4); } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-cell:not(:last-of-type) { border-color: rgba(41, 117, 171, 0.4); } #ftsm-009-modal .ftsm-009__table-cell--centered { justify-content: center; } #ftsm-009-modal .ftsm-009__table-cell__heading { font: 400 12px/16px "Jost", sans-serif; } #ftsm-009-modal .ftsm-009__table-cell__heading.text-pink { font: 400 12px/16px "Jost", sans-serif; color: #e46198; } #ftsm-009-modal .ftsm-009__table-cell__heading.text-pink { color: #2975ab; } #ftsm-009-modal .ftsm-009__table-cell__heading.text-purple { font: 700 12px/16px "Jost", sans-serif; color: #642a75; } #ftsm-009-modal .ftsm-009__table-cell__icon { width: 19px; height: 19px; } #ftsm-009-modal .ftsm-009__table-cell-fluid { width: 100%; padding: 10px; } #ftsm-009-modal .ftsm-009__table-cell-fluid a { color: #e46198; text-decoration: none; } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-cell-fluid a { color: #2975ab; } #ftsm-009-modal .ftsm-009__table-cell--bg-accent { background-color: #e46198; color: #fff; } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-cell--bg-accent { background-color: #2975ab; } #ftsm-009-modal .ftsm-009__table-column .ftsm-009__table-cell:nth-of-type(1) ~ div:nth-of-type(odd), #ftsm-009-modal .ftsm-009__table-cell-fluid:last-of-type { background-color: rgba(228, 97, 152, 0.20); } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-column .ftsm-009__table-cell:nth-of-type(1) ~ div:nth-of-type(odd), #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-cell-fluid:last-of-type { background-color: rgba(41, 117, 171, 0.20); } #ftsm-009-modal .ftsm-009__table-cell-fluid:last-of-type { border-top: 1px solid #e46198; } #ftsm-009-modal.ftsm-009-modal--men .ftsm-009__table-cell-fluid:last-of-type { border-color: #2975ab; } #ftsm-009-modal .ftsm-009__table-cell.ftsm-009__table-cell--big { height: 48px; } #ftsm-009-modal .usage .ftsm-009__table { overflow: hidden; } #ftsm-009-modal .usage .ftsm-009__table-column:nth-of-type(3) { border-left: none; } #ftsm-009-modal .usage .ftsm-009__table-column .ftsm-009__table-cell:first-of-type { height: 38px; font-weight: 500; } #ftsm-009-modal .usage .ftsm-009__table-cell-fluid + .ftsm-009__table-column { max-width: 168px; width: 50%; flex: unset; } #ftsm-009-modal .usage .ftsm-009__table-cell { height: 32px; } #ftsm-009-modal .usage .ftsm-009__table-cell-fluid { padding: 10px; } #ftsm-009-modal .usage .ftsm-009__table-cell-fluid a { font-weight: 500; color: #642a75; text-decoration: none; } #ftsm-009-modal .usage .ftsm-009__table-cell, #ftsm-009-modal .usage .ftsm-009__table span { font: 400 12px/18px "Poppins", sans-serif; color: #fff; } #ftsm-009-modal .usage .ftsm-009__table span strong { font: 700 12px/18px "Poppins", sans-serif; color: #fff; } #ftsm-009-modal .usage .ftsm-009__table .ftsm-009__table-cell-fluid:last-of-type { border-top: 1px solid #642a75; } #ftsm-009-modal .usage .ftsm-009__table-column .ftsm-009__table-cell:not(.ftsm-009__table-cell--bg-accent):nth-of-type(2n + 1) { background-color: rgba(100, 42, 117, 0.2); } @media (min-width: 991px) { body.ftsm-009-modal-open { padding-right: 15px; } } @media (max-width: 991px) { #ftsm-009-modal .ftsm-009-modal-inner { max-width: calc(100% - 32px); height: calc(100% - 52px); padding: 0; } } @media (max-width: 576px) { #ftsm-009-modal .ftsm-009__table-column:first-of-type { width: 45%; flex: unset; } #ftsm-009-modal .ftsm-009-modal__close { right: 14px; transform: translateY(-50%); } }`;

const timeout = 5000;
const interval = 250;

const maxExecN = timeout / interval;
let currentExecN = 0;

const expInterval = setInterval(function () {
  const body = document.querySelector("body");
  if (body) {
    // Append modal
    body.insertAdjacentHTML("beforeend", expHtml);

    // Append "Concieve for Men" class
    if (isConcieveForMenPage) document.querySelector("#ftsm-009-modal").classList.add("ftsm-009-modal--men");

    const productViewImages = [
      document.querySelector(".productView-image"),
      document.querySelector(".product-pills__img"),
    ];
    productViewImages.forEach((item) => item.addEventListener("click", showModal));

    // Handle close modal
    const modalClose = document.querySelector(".ftsm-009-modal__close");
    [modalClose].forEach((item) =>
      item.addEventListener("click", function (ev) {
        console.log(ev.target.classList.contains("ftsm-009-modal__close"), ev.target);
        if (
          document.querySelector("#ftsm-009-modal").classList.contains("visible") &&
          (!ev.target.closest(".ftsm-009-modal-inner") || ev.target.classList.contains("ftsm-009-modal__close"))
        )
          toggleModal();
      })
    );

    const style = document.createElement("style");
    style.innerHTML = expCss;
    document.head.append(style);
    clearInterval(expInterval);
  }

  currentExecN++;
  if (currentExecN > maxExecN) clearInterval(expInterval);
}, interval);

function showModal() {
  console.log("[showModal]");
  document.querySelector("#ftsm-009-modal").classList.add("visible");
  document.querySelector("body").classList.add("ftsm-009-modal-open");
}

function toggleModal() {
  document.querySelector("#ftsm-009-modal").classList.toggle("visible");
  document.querySelector("body").classList.toggle("ftsm-009-modal-open");
}
